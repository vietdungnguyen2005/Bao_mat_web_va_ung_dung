{% extends 'taskManager/base.html' %}

{% block content %}
    {% if registered %}
        <div class="alert alert-success">
            <p><strong>Đăng ký thành công! / Thanks for registering!</strong></p>
            <p><a href="/taskManager/login">Quay lại trang đăng nhập.</a></p>
        </div>
    {% else %}
    
    <div class="col-lg-7 col-sm-7 address">
        <h4>Registration</h4>
        
        {% if user_form.non_field_errors %}
            <div class="alert alert-danger">
                {% for error in user_form.non_field_errors %}
                    {{ error }}
                {% endfor %}
            </div>
        {% endif %}

        <div class="contact-form">
            <form method="post" role="form" action="/taskManager/register/" enctype="multipart/form-data">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="id_username">Username:</label>
                    <input class="form-control" id="id_username" name="username" type="text" 
                           value="{{ user_form.username.value|default_if_none:'' }}" required />
                    {% if user_form.username.errors %}
                        <div class="text-danger" style="color: red; font-size: 0.9em; margin-top: 5px;">
                            {% for error in user_form.username.errors %} {{ error }} {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="id_first_name">First name:</label>
                    <input class="form-control" id="id_first_name" name="first_name" type="text" 
                           value="{{ user_form.first_name.value|default_if_none:'' }}" />
                     {% if user_form.first_name.errors %}
                        <div class="text-danger" style="color: red;">
                            {% for error in user_form.first_name.errors %} {{ error }} {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="id_last_name">Last name:</label>
                    <input class="form-control" id="id_last_name" name="last_name" type="text" 
                           value="{{ user_form.last_name.value|default_if_none:'' }}" />
                </div>

                <div class="form-group">
                    <label for="id_email">Email:</label>
                    <input class="form-control" id="id_email" name="email" type="email" 
                           value="{{ user_form.email.value|default_if_none:'' }}" required />
                    {% if user_form.email.errors %}
                        <div class="text-danger" style="color: red;">
                            {% for error in user_form.email.errors %} {{ error }} {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="id_password">Password:</label>
                    <input class="form-control" id="id_password" name="password" type="password" required />
                    
                    {% if user_form.password.errors %}
                        <div class="alert alert-danger" style="margin-top: 5px; padding: 5px; color: red;">
                            {% for error in user_form.password.errors %}
                                <i class="fa fa-exclamation-circle"></i> {{ error }}<br>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <br>
                <button class="btn btn-danger" type="submit">Register</button>
            </form>
        </div>
    </div>
    
    {% endif %}
{% endblock %}